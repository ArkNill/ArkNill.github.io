---
layout: post
Title:  "[Network] Proxy"
---
## 프록시란?
```cpp
프록시(Proxy)란 [ 대신 ] 이라는 의미를 가지고 있습니다. 프로토콜에 있어서 대리 응답 등에서 사용하는 개념이라고 할 수 있습니다. 보안상의 문제로 직접 통신을 주고 받을 수 없는 사이에서 프록시를 이용해서 중계를 하는 개념이라고 볼 수 있습니다.
이렇게 중계를 기능을 하는 것을 우리는 [ 프록시 서버 ] 라고 부릅니다.
```
- - -

## 프록시 서버의 특징
```cpp
프록시 서버는 클라이언트와 서버의 입장에서 볼 때 서로 반대의 역할을 하는 것처럼 보입니다. 클라이언트가 프록시를 바라보면 프록시가 [ 서버 ] 와 같이 동작을 하게 되는 것이고, 반대로 서버가 프록시를 바라보면 [ 클라이언트 ] 처럼 작동을 하게 되는 것입니다.

프록시를 사용을 하는 이유는 단순히 보안 때문은 아닙니다. 프록시는 프록시 서버에 요청이 된 내용들을 [ 캐시 ]를 이용해 저장해 둡니다. 이렇게 캐시로 저장을 해 두게 된다면 다시 데이터를 가져올 상황이 발생을 하지 않기 때문에 [ 전송시간을 절약 ] 할 수 있다는 이점이 생기게 됩니다.
```
- - -

## Foward Proxy
```cpp
특정 사이트를 가려고 할 때, 가고싶은 목적지 사이트의 주소를 직접 프록시  서버에 전달하며 프록시 서버가 해당 목적지 사이트의 내용을 받아와서 전달을 해주는 개념이라고 볼 수 있습니다.

웹 브라우저나 토렌트같은 곳에 프록시를 설정해주면 그 프록시를 통해서 데이터를 주고 받는데 즉, 포워드 프록시란 "목적지에 직접 접근하지 않고 프록시를 통해 데이터를 주고 받기 위해 사용하는 프록시" 입니다.

캐싱 기능이 있으므로 자주 사용되는 컨텐츠들이라면 성능 향상을 가져올 수 있으며, 프록시에서 특정 사이트는 접근이 불가능 하도록 제한을 걸 수도 있기 때문에 기업 환경(기업의 외부망) 에서 많이 사용이 되는 방식입니다.
```
- - -

## Foward Proxy
```cpp
사용자가 Reverse Proxy로 설정된 서버의 주소로 데이터를 요청을 하게 되며, 프록시 서버가 이 요청을 받아서 실제 내부 서버에서 데이터를 받아와 클라이언트에게 전달을 해 주는 개념입니다.

물론 사용자가 직접 내부 서버에 다이렉트로 붙어서 서비스를 제공 받을 수도 있겠지만 이렇게 프록시를 구성을 하는 이유는 바로 [ 보안 ] 때문입니다.
리버스 프록시의 back-end 단에 여러 개의 서비스 서버를 배치하고, 사용자의 요청을 리버스 프록시를 통해 분산할 때 유용하게 쓰일 수 있기 때문입니다. 보안상의 이유로 직접 내부망 서버들, 즉 back-end 단의 서버에 접근하는 것을 원하지 않을 때 DMZ와 같은 네트워크 Zone에 리버스 프록시를 구성함으로써 간접적으로 서버에 접근하는 용도로 쓰일 수도 있다.

보통의 기업 네트워크 환경은 DMZ라고 하는 내부 네트워크와 외부 네트워크 사이에 위치하는 구간이 존재하며, 이 구간에는 보통 메일, 웹, FTP서버등 외부 서비스를 제공하는 서버들이 위치를 하고 있습니다.

대표적인 리버스 프록시로는 nginx, apache가 있고 도커 엔진 또한 자체적으로 제공하고 있는 도커 스웜 모드 서비스의 Virtual IPs를 이용한 요청 분산도 같은 맥락이라고 볼 수 있습니다.
```
- - -

## 차이점
```cpp
포워드 프록시를 사용하는 경우에는 웹 브라우저 등에 1.2.3.4:8888 로 프록시를 설정하지만, 사용자는 어떤 url을 요청하든 자기가 원하는 곳에 데이터를 요청해 브라우저에서 볼 수 있습니다.

그렇지만 리버스 프록시는 사용자의 Endpoint가 리버스 프록시의 Domain Name이 되는데 이때, 사용자는 항상 리버스 프록시의 주소인 reverse.proxy.com 과 같이 요청하게 되고, 리버스 프록시는 back-end 단에 있는 여러 서버들 중 하나로부터 응답을 받아와 사용자에게 반환하게 됩니다.
```
- - -
